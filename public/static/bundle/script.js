(()=>{"use strict";var t;!function(t){t.Success="success",t.Error="error"}(t||(t={}));const e=function(){function t(t,e){this.type=e,this.text=t,this.id=String(Date.now()*Math.floor(10*Math.random()))}return t.prototype.changeType=function(t){this.type=t},t}(),n=function(){function e(t){this.deletedItems=[],this.container=t,this.id=String(Date.now()*Math.floor(10*Math.random()))}return e.prototype.update=function(e){var n=this;e.forEach((function(e){e.type===t.Error&&(n.deletedItems.find((function(t){return t.id===e.id}))||n.deletedItems.push(e))})),this.container&&(this.container.innerHTML=""),this.deletedItems.forEach((function(t){var e,o=document.createElement("li"),i=document.createElement("span");i.innerHTML=t.text,o.className="todo__item todo__item--".concat(t.type),o.appendChild(i),null===(e=n.container)||void 0===e||e.appendChild(o)}))},e}(),o=function(){function e(t){this.doneItems=[],this.container=t,this.id=String(Date.now()*Math.floor(10*Math.random()))}return e.prototype.update=function(e){var n=this;e.forEach((function(e){e.type===t.Success&&(n.doneItems.find((function(t){return t.id===e.id}))||n.doneItems.push(e))})),this.container&&(this.container.innerHTML=""),this.doneItems.forEach((function(e){var o;if(e.type===t.Success){var i=document.createElement("li"),r=document.createElement("span");r.innerHTML=e.text,i.className="todo__item todo__item--".concat(e.type),i.appendChild(r),null===(o=n.container)||void 0===o||o.appendChild(i)}}))},e}();var i=document.querySelector(".deleted-todo-items__list"),r=document.querySelector(".done-todo-items__list"),s=new n(i),c=new o(r);const a=function(){function n(t){this.todoList=[],this.subscribers=[],this.container=t}return n.prototype.subscribe=function(t){this.subscribers.push(t)},n.prototype.unsubscribe=function(t){this.subscribers=this.subscribers.filter((function(e){return e.id!==t}))},n.prototype.notify=function(t){this.subscribers.forEach((function(e){return e.update(t)}))},n.prototype.createItem=function(t,e,n){var o=document.createElement("li"),i=document.createElement("span"),r=document.createElement("div");r.classList.add("todo__item-controls");var s=document.createElement("div");s.className="todo__item-control todo__item-control--error";var c=document.createElement("i");c.classList.add("fa-solid"),c.classList.add("fa-trash"),s.appendChild(c);var a=document.createElement("div");a.className="todo__item-control todo__item-control--success";var d=document.createElement("i");return d.classList.add("fa-solid"),d.classList.add("fa-check"),a.appendChild(d),r.appendChild(s),r.appendChild(a),i.innerHTML=t,o.className="todo__item todo__item--".concat(e),o.classList.add(),o.setAttribute("key",n),o.appendChild(i),o.appendChild(r),o},n.prototype.renderNewItem=function(t){var e,n=this.createItem(t.text,t.type,t.id);null===(e=this.container)||void 0===e||e.appendChild(n);var o=this;n.addEventListener("click",(function(t){o.todoEventHandler(t,this)}))},n.prototype.addItem=function(t,n){var o=new e(t,n);this.subscribe(s),this.subscribe(c),this.todoList.push(o),this.renderNewItem(o)},n.prototype.deleteItem=function(e){var n=this;this.todoList.forEach((function(n){n.id===e&&n.changeType(t.Error)})),this.notify(this.todoList),this.todoList=this.todoList.filter((function(t){return t.id!==e})),this.container&&(this.container.innerHTML=""),this.todoList.forEach((function(t){n.renderNewItem(t)}))},n.prototype.markItemAsDone=function(e){var n=this;this.todoList.forEach((function(n){n.id===e&&n.changeType(t.Success)})),this.notify(this.todoList),this.todoList=this.todoList.filter((function(t){return t.id!==e})),this.container&&(this.container.innerHTML=""),this.todoList.forEach((function(t){n.renderNewItem(t)}))},n.prototype.todoEventHandler=function(t,e){var n,o,i=t.target,r=e.getAttribute("key");i.className.includes("error")||(null===(n=i.parentElement)||void 0===n?void 0:n.className.includes("error"))?this.deleteItem(r):(i.className.includes("success")||(null===(o=i.parentElement)||void 0===o?void 0:o.className.includes("success")))&&this.markItemAsDone(r)},n}();var d;!function(t){t.Success="success",t.Error="danger"}(d||(d={}));const u=new(function(){function t(t){this.alerts=[],this.container=t}return t.prototype.addAlert=function(t){var e=this,n=t.text,o=t.type,i=String(Date.now()*Math.floor(10*Math.random())),r={type:o,text:n,id:i};this.alerts.push(r),this.render(),setTimeout((function(){e.alerts=e.alerts.filter((function(t){return t.id!==i})),e.container&&(e.container.innerHTML=""),e.render()}),1e3)},t.prototype.createAlertElement=function(t,e){var n=document.createElement("div");return n.className="alert alert-".concat(e),n.innerHTML=t,n},t.prototype.render=function(){var t=this;this.alerts.forEach((function(e){var n,o=t.createAlertElement(e.text,e.type);null===(n=t.container)||void 0===n||n.appendChild(o)}))},t}())(document.querySelector(".alert-list"));var l=new a(document.querySelector(".todo__list")),h=document.querySelector(".todo__add-btn"),m=document.querySelector(".todo__controls"),p=document.querySelector(".todo__input");function f(t){t.preventDefault();var e=null==p?void 0:p.value;e?(l.addItem(e,""),p.value=""):u.addAlert({text:"Поле ввода пустое",type:d.Error})}null==h||h.addEventListener("click",f),null==m||m.addEventListener("submit",f)})();